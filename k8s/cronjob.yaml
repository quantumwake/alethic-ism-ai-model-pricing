apiVersion: batch/v1
kind: CronJob
metadata:
  name: alethic-ism-ai-model-pricing-cronjob
  namespace: alethic
spec:
  schedule: "0 0 * * *"  # Daily at midnight
  jobTemplate:
    spec:
      template:
        metadata:
          labels:
            app: alethic-ism-ai-model-pricing
        spec:
          restartPolicy: OnFailure
          containers:
          - name: ai-model-pricing-fetcher
            image: <IMAGE>
            imagePullPolicy: Always
            env:
              - name: DB_HOST
                valueFrom:
                  secretKeyRef:
                    name: alethic-ism-ai-model-pricing-secret
                    key: DB_HOST
              - name: DB_PORT
                valueFrom:
                  secretKeyRef:
                    name: alethic-ism-ai-model-pricing-secret
                    key: DB_PORT
              - name: DB_NAME
                valueFrom:
                  secretKeyRef:
                    name: alethic-ism-ai-model-pricing-secret
                    key: DB_NAME
              - name: DB_USER
                valueFrom:
                  secretKeyRef:
                    name: alethic-ism-ai-model-pricing-secret
                    key: DB_USER
              - name: DB_PASSWORD
                valueFrom:
                  secretKeyRef:
                    name: alethic-ism-ai-model-pricing-secret
                    key: DB_PASSWORD
          imagePullSecrets:
          - name: regcred
      backoffLimit: 3
  successfulJobsHistoryLimit: 3
  failedJobsHistoryLimit: 1